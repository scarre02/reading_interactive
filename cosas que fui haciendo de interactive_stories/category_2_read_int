import mysql.connector
from TTS.api import TTS

# Configurar la conexi√≥n a MySQL
db_config = {
    "host": "localhost",   # Cambia si tu base de datos est√° en otro servidor
    "user": "tu_usuario",  # Tu usuario de MySQL
    "password": "tu_contrase√±a",  # Tu contrase√±a de MySQL
    "database": "nombre_de_tu_base_de_datos"  # Nombre de la base de datos
}

try:
    # Conectar a MySQL
    conn = mysql.connector.connect(**db_config)
    cursor = conn.cursor()

    # Ejecutar la consulta para obtener el texto
    query = "SELECT texto FROM tu_tabla WHERE id = 1;"  # Cambia esto seg√∫n tu tabla
    cursor.execute(query)

    # Obtener el resultado
    result = cursor.fetchone()

    if result:
        text_to_speak = result[0]  # El texto extra√≠do de la base de datos
        print("üìñ Texto extra√≠do de MySQL:", text_to_speak)

        # Usar Coqui TTS para leer el texto
        tts = TTS("tts_models/en/ljspeech/vits")  # Cambia el modelo si lo deseas
        tts.tts_to_file(text=text_to_speak, file_path="output.wav")

        print("‚úÖ Audio generado: output.wav")
    
    else:
        print("‚ö†Ô∏è No se encontr√≥ ning√∫n texto en la base de datos.")

except mysql.connector.Error as err:
    print(f"‚ùå Error al conectar a MySQL: {err}")

finally:
    # Cerrar la conexi√≥n
    if 'cursor' in locals():
        cursor.close()
    if 'conn' in locals() and conn.is_connected():
        conn.close()
